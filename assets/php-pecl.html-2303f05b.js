import{_ as s,r,o as t,c as l,a as e,b as i,d,e as n}from"./app-331163d5.js";const p={},c=n('<h1 id="php扩展安装" tabindex="-1"><a class="header-anchor" href="#php扩展安装" aria-hidden="true">#</a> php扩展安装</h1><h2 id="情境" tabindex="-1"><a class="header-anchor" href="#情境" aria-hidden="true">#</a> 情境</h2><p>​ <em>源码安装redis扩展</em></p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法" aria-hidden="true">#</a> 解决方法</h2>',4),o=e("p",null,"下载redis的安装包",-1),h={href:"https://github.com/phpredis/phpredis/archive/5.1.1.tar.gz",target:"_blank",rel:"noopener noreferrer"},u={href:"https://pecl.php.net/",target:"_blank",rel:"noopener noreferrer"},m=n(`<li><p>使用tar命令解压到指定目录，并进入文件夹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>tar zcxf phpredis-5.1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>查看扩展目录</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>在phpinfo的结果中，搜索extension_dir找到扩展目录
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>生成 .configure文件</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>phpize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编译到指定目录</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> ./configure --with-php-config=/usr/lib64/php/modules
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>配置扩展信息</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>extension=redis.so
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>php -m 查看</p><p>注意：如果使用nginx代理的服务查看扩展的话，需要重启nginx和php-fpm</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>nginx -s stop //停止nginx
nginx   //开启nginx
pkill php-fpm //停止php-fpm
php-fpm -R  //重启或启动php-fpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,7),v=n('<h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h2><blockquote><p>如报错: PHP Warning: PHP Startup: Unable to load dynamic library &#39;/usr/lib64/php/modules/redis.so&#39; - /usr/lib64/php/modules/redis.so: undefined symbol: php_json_decode_ex in Unknown on line 0</p></blockquote><ul><li><h3 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h3><p>这是因为和json扩展加载顺序冲突导致的</p></li><li><h3 id="解决" tabindex="-1"><a class="header-anchor" href="#解决" aria-hidden="true">#</a> 解决</h3><p>不要在php.ini里加入extension=redis.so这行，可在php.d文件夹下创建新文件redis.ini，在redis.ini里加入extension=redis.so这行. 重启php php -m 发现redis扩展加载上了</p></li></ul>',3);function x(g,b){const a=r("ExternalLinkIcon");return t(),l("div",null,[c,e("ul",null,[e("li",null,[o,e("p",null,[i("地址："),e("a",h,[i("https://github.com/phpredis/phpredis/archive/5.1.1.tar.gz"),d(a)]),i(" 扩展下载地址："),e("a",u,[i("https://pecl.php.net/"),d(a)])])]),m]),v])}const f=s(p,[["render",x],["__file","php-pecl.html.vue"]]);export{f as default};
